# âš¡ OPTIMAL PROTOCOL // NATIVE (v4.0)

**THE ULTIMATE DISCIPLINE MACHINE.**

> "Weakness is a choice. This software removes that option."

**OPTIMAL PROTOCOL** has evolved. We have abandoned the constraints of the web browser. This is no longer a JavaScript toy. This is a **NATIVE iOS WEAPON** built for maximum performance, zero latency, and aggressive psychological re-wiring.

You are the Operator. The **Cyber-Construct** is your digital soul. Feed it with discipline, or watch it rot in high-definition 120Hz.

---

## ðŸš€ THE GOD STACK (iOS NATIVE)

We have migrated to a pure, bleeding-edge Apple ecosystem stack to achieve **GODLIKE** performance.

-   **CORE:** **Swift 6.0** (The language of the gods)
-   **UI:** **SwiftUI** with Glassmorphism & ZStack layering.
-   **ENGINE:** **SceneKit** (Replacing React Three Fiber for raw native 3D performance).
-   **VISUALS:** **Metal Shaders (MSL)**. Custom GPU pipelines for "Scanlines", "Glitch", and "Pixelation" effects. No CSS filters allowed.
-   **HAPTICS:** **Core Haptics**. Complex vibration textures. Feel the weight of your success.
-   **WIDGETS:** **WidgetKit**. Persistent Home Screen surveillance. The protocol is always watching.
-   **DATA:** **Supabase (Swift)**. Real-time synchronization.

---

## ðŸ’€ HARDCORE MODE (PERMADEATH)

**âš ï¸ WARNING: EXTREME DISCIPLINE REQUIRED.**

-   **The Contract:** If you miss **ONE DAY**, your entire existence (Streak, Level, Avatar) is **TERMINATED**.
-   **System Failure:** The interface bleeds red. Alarms sound. Your avatar decays instantly.
-   **No Mercy:** There is no undo button.

---

## ðŸ‘ï¸ OMNIPRESENCE LAYER (WIDGETS)

The protocol does not sleep.

-   **Tactical HUD (Small/Medium):** Displays your current Streak and Integrity on the Home Screen.
-   **Bio-Link:** Updates instantly via App Groups when you log a habit.
-   **Drill Sergeant:** Local notifications at 07:00 and 20:00 to ensure compliance.

---

## ðŸ¤– THE DOOM AVATAR (NATIVE)

Your digital twin is now a **Procedural SceneKit Entity**.

-   **Dynamic Morphology:** Muscles grow with 'Strength' habits. Armor plates thicken with 'Resilience'.
-   **Retro-Rendering:** The 3D scene is passed through a custom **Metal Pixelation Shader** to mimic the raw, jagged aesthetic of 1995 FPS games.
-   **12 FPS Animation:** We artificially limit the animation frame rate to capture that crunchy stop-motion feel, while the camera glides at a buttery 120Hz.

---

## ðŸ“‚ PROJECT STRUCTURE

```text
/ios-app
  â”œâ”€â”€ Models/        # Swift Structs (User, Habit, Log)
  â”œâ”€â”€ Views/         # SwiftUI & SceneKit Views
  â”œâ”€â”€ Resources/     # Metal Shaders & Assets
  â”œâ”€â”€ Managers/      # Game Logic & State
  â””â”€â”€ OptimalProtocol.xcodeproj
```

---

## ðŸ› ï¸ DEPLOYMENT INSTRUCTIONS

### ðŸ“± iOS NATIVE (THE NEW STANDARD)
1.  Open `ios-app/OptimalProtocol.xcodeproj` in **Xcode 16+**.
2.  Add Package Dependency: `supabase-swift`.
3.  Target Device: **iPhone 15 Pro / 16 Pro** (Required for Metal Performance).
4.  **Build & Run (Cmd+R)**.

### â˜ï¸ SERVER MIGRATION (REQUIRED)
To enable server-side streak tracking and Hardcore Mode enforcement:
1.  Go to your Supabase Dashboard -> SQL Editor.
2.  Run the contents of `supabase/server_logic.sql`.
3.  This will:
    -   Create the `calculate_streak` function.
    -   Enable the "Reaper" trigger for Hardcore Mode.
    -   Lock down the `profiles` table so users cannot cheat.

### ðŸš€ WEB DEPLOYMENT (VERCEL)
1.  Install Vercel CLI: `npm i -g vercel`
2.  Run `vercel` in the project root.
3.  Set Environment Variables in Vercel Dashboard:
    -   `VITE_SUPABASE_URL`: [Your URL]
    -   `VITE_SUPABASE_ANON_KEY`: [Your Key]
4.  The `vercel.json` is pre-configured for SPA routing.

---

**OPTIMAL PROTOCOL // SYSTEM ONLINE**
*Discipline is the only currency that matters.*
